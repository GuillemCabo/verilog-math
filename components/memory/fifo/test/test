#/usr/bin/env python

from subprocess import call
import sys
import os

fnull = open(os.devnull, 'w')

return_value = call(["c2verilog", "fifo_tb.c"])
if return_value != 0:
    print "compile error"
    sys.exit(1)

return_value = call(["iverilog", "-o" "fifo_tb", "main_0.v", "../fifo.v", "fifo_tb.v"])
if return_value != 0:
    print "compile error"
    sys.exit(1)

return_value = call(["./fifo_tb"], stdout=fnull)
if return_value != 0:
    print "fifo test ... fail"
    sys.exit(1)
else:
    print "fifo test ... pass"
